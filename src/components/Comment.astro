---
// src/components/Comment.astro
import { siteConfig } from '../site.config';
---

<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script is:inline src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<script is:inline define:vars={{ siteConfig }}>
  // 等待页面加载完成
  document.addEventListener('DOMContentLoaded', () => {
    const gitalk = new Gitalk({
      clientID: 'dff9fde3eab645bdb0b2', 
      clientSecret: 'c073b1dce5f5d3a4d5273681b49a779c9ae6f9de',
      repo: 'xiaoshuu.github.io',      // 你的博客仓库名 (存放评论 issue 的地方)
      owner: 'xiaoshuu',              // 你的 GitHub 用户名
      admin: ['xiaoshuu'],            // 管理员用户 (通常就是你自己)
      id: location.pathname.slice(0, 50), // 用网址作为 issue 的唯一标识，限制长度
      distractionFreeMode: false
    });

    gitalk.render('gitalk-container');
  });
</script>

<style>
  /* 稍微调整一下 Gitalk 的样式，让它不那么突兀 */
  :global(.gt-container .gt-btn-login),
  :global(.gt-container .gt-btn-public),
  :global(.gt-container .gt-btn-preview) {
    background-color: var(--accent-library);
    border-color: var(--accent-library);
  }
  :global(.gt-container .gt-btn-login:hover) {
    background-color: #7a8e85;
    border-color: #7a8e85;
  }
</style>